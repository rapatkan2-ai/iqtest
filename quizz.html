<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MindTest.id - Modern Quiz Experience</title>
    <link rel="icon" type="image/webp" href="https://cdn.jsdelivr.net/gh/rapatkan2-ai/iqtest@main/FaviconNew.webp">
    <script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.8.1/dist/dotlottie-wc.js" type="module"></script>


    <link rel="stylesheet" href="quizz.css">
    <link href="styles.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
</head>

<body
    class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 flex flex-col overflow-hidden selection:bg-primary selection:text-white">


    <div id="loading"
        class="fixed inset-0 z-50 flex flex-col justify-center items-center bg-gray-50/90 dark:bg-gray-900/95 backdrop-blur-sm transition-opacity duration-500">
        <svg class="loader mb-6" width="240" height="240" viewBox="0 0 240 240">
            <circle class="loader-ring loader-ring-a" cx="120" cy="120" r="105" fill="none" stroke="#000"
                stroke-width="20" stroke-dasharray="0 660" stroke-dashoffset="-330" stroke-linecap="round"></circle>
            <circle class="loader-ring loader-ring-b" cx="120" cy="120" r="35" fill="none" stroke="#000"
                stroke-width="20" stroke-dasharray="0 220" stroke-dashoffset="-110" stroke-linecap="round"></circle>
            <circle class="loader-ring loader-ring-c" cx="85" cy="120" r="70" fill="none" stroke="#000"
                stroke-width="20" stroke-dasharray="0 440" stroke-linecap="round"></circle>
            <circle class="loader-ring loader-ring-d" cx="155" cy="120" r="70" fill="none" stroke="#000"
                stroke-width="20" stroke-dasharray="0 440" stroke-linecap="round"></circle>
        </svg>
        <p class="text-primary font-bold text-lg tracking-widest animate-pulse">MEMUAT...</p>
    </div>


    <div id="app-container"
        class="hidden w-full max-w-5xl mx-auto h-full flex flex-col p-1 md:p-6 gap-1 md:gap-6 relative z-10">



        <header id="quiz-header"
            class="fixed top-0 left-0 right-0 z-40 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 safe-pt transition-all duration-300">
            <!-- Top Progress Bar -->
            <div class="absolute top-0 left-0 w-full h-1 bg-gray-100 dark:bg-gray-800">
                <div id="progress-bar" class="h-full bg-teal-600 transition-all duration-500 ease-out"
                    style="width: 0%"></div>
            </div>

            <div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
                <!-- Logo Area -->
                <div class="flex items-center gap-3">
                    <div class="flex items-center gap-2">
                        <img src="https://cdn.jsdelivr.net/gh/rapatkan2-ai/iqtest@main/FaviconNew.webp" alt="Logo"
                            class="w-10 h-10 rounded-lg">
                        <div class="flex flex-col">
                            <span
                                class="text-xl font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 leading-none">MindTest.id</span>
                            <span class="text-[10px] font-bold text-gray-400 tracking-widest leading-tight">INTELLEGENCE
                                ASSESMENT</span>
                        </div>
                    </div>
                </div>

                <!-- Timer Area -->
                <div id="timer-container"
                    class="flex items-center gap-2 bg-gray-100 dark:bg-gray-800 rounded-full px-4 py-1.5">
                    <span class="material-symbols-rounded text-gray-500 text-lg">timer</span>
                    <span id="timer" class="font-mono font-bold text-gray-700 dark:text-gray-300 text-sm">12:30</span>
                </div>
            </div>
        </header>


        <section id="get-ready-screen" class="hidden h-full w-full flex items-center justify-center p-4">
            <div
                class="glass-panel bg-white dark:bg-slate-800 rounded-3xl shadow-2xl p-8 w-full max-w-lg text-center flex flex-col items-center animate-fade-in-up border border-slate-100 dark:border-slate-700 md:min-h-[400px] justify-center">

                <div id="instruction-icon-container"
                    class="w-20 h-20 rounded-full flex items-center justify-center mb-6 transition-all duration-300 bg-gray-100 dark:bg-gray-700 shrink-0">
                    <span id="instruction-icon" class="material-icons text-4xl text-gray-500">info</span>
                </div>

                <h2 id="instruction-title"
                    class="text-2xl md:text-3xl font-extrabold mb-4 text-slate-800 dark:text-white tracking-tight">
                    Bersiaplah
                </h2>

                <div class="relative w-full max-w-md mx-auto mb-8 group">
                    <div
                        class="absolute inset-0 bg-blue-500/5 dark:bg-blue-400/10 rounded-2xl blur-xl transition-all duration-300 group-hover:bg-blue-500/10 dark:group-hover:bg-blue-400/20">
                    </div>
                    <div id="instruction-desc"
                        class="relative bg-slate-50/80 dark:bg-slate-800/80 backdrop-blur-sm border border-slate-200/60 dark:border-slate-700/60 rounded-2xl p-6 shadow-inner text-slate-600 dark:text-slate-300 text-xs md:text-base leading-relaxed text-center">
                        Instruksi akan muncul di sini.
                    </div>
                </div>

                <!-- Steps Indicators -->
                <div class="flex gap-2 mb-6" id="instruction-indicators"></div>

                <button id="instruction-next-btn"
                    class="w-full py-3.5 rounded-xl bg-gradient-to-r from-primary to-indigo-600 text-white font-bold shadow-lg shadow-primary/25 hover:shadow-primary/40 hover:-translate-y-0.5 transition-all duration-200 mt-auto">
                    Mengerti
                </button>
            </div>
        </section>


        <div id="survey-screen" class="hidden h-full flex flex-col items-center justify-center p-2">
            <div
                class="glass-panel bg-card-light dark:bg-card-dark rounded-3xl shadow-soft p-6 md:p-8 w-full max-w-2xl text-center">
                <h2 id="survey-question-text"
                    class="text-xl md:text-3xl font-bold mb-4 md:mb-8 leading-snug text-gray-800 dark:text-white min-h-[4rem] flex items-center justify-center">
                </h2>
                <div id="survey-options-container" class="space-y-2 md:space-y-3 w-full">

                </div>
            </div>
        </div>



        <main id="main-quiz"
            class="hidden fixed top-16 bottom-0 left-0 right-0 w-full max-w-7xl mx-auto px-4 md:px-8 overflow-y-auto z-0 hide-scrollbar pb-20">

            <div id="image-question-layout"
                class="flex-1 flex flex-col md:flex-row gap-6 md:gap-12 items-center md:items-start min-h-full justify-start py-6">

                <!-- Image Column -->
                <div class="w-full md:w-1/2 flex justify-center md:justify-end">
                    <div id="image-question-image-container"
                        class="w-full max-w-md md:max-w-lg aspect-[4/3] bg-white rounded-xl border border-gray-200 shadow-sm flex items-center justify-center p-2">
                        <!-- Image injected here by JS -->
                    </div>
                </div>

                <!-- Options Column -->
                <div class="w-full md:w-1/2 flex flex-col max-w-md">
                    <h2 id="image-question-text"
                        class="text-center md:text-left text-gray-500 text-xs md:text-sm font-medium mb-2 md:mb-6 uppercase tracking-wider">
                        Choose your answer:
                    </h2>

                    <!-- Options Grid: 3 Cols Mobile & Desktop for compactness -->
                    <div id="image-options-container" class="grid grid-cols-3 gap-1.5 w-full">
                        <!-- Options injected here by JS -->
                    </div>
                </div>

            </div>

            <!-- Hidden Text Layout (Preserved just in case) -->
            <div id="text-question-layout"
                class="hidden w-full max-w-3xl bg-white dark:bg-gray-800 rounded-xl p-8 shadow-sm text-center mx-auto mt-10">
                <h2 id="text-question-text" class="text-2xl font-bold mb-8 text-gray-800 dark:text-white"></h2>
                <div id="text-options-container" class="grid gap-4"></div>
            </div>

        </main>



        <div id="interstitial-screen" class="hidden h-full flex items-center justify-center p-4">
            <div
                class="glass-panel bg-card-light dark:bg-card-dark rounded-3xl shadow-2xl p-6 md:p-8 max-w-md w-full text-center transform transition-all duration-500 hover:scale-[1.02]">
                <div id="interstitial-lottie"
                    class="w-full max-w-[320px] md:max-w-[380px] aspect-square mx-auto mb-1 flex items-center justify-center">
                </div>
                <h2 id="interstitial-headline"
                    class="text-xl md:text-2xl font-extrabold mb-2 md:mb-4 bg-clip-text text-transparent bg-gradient-to-r from-primary to-accent leading-tight">
                </h2>
                <p id="interstitial-text"
                    class="text-sm md:text-base text-gray-600 dark:text-gray-300 leading-relaxed mb-6 md:mb-8"></p>
                <button id="interstitial-continue-btn"
                    class="w-full py-3 md:py-3.5 rounded-xl bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold hover:opacity-90 transition-opacity shadow-lg text-sm md:text-base">
                    Lanjutkan Tantangan
                </button>
            </div>
        </div>


        <div id="calculating-screen" class="hidden h-full flex items-center justify-center p-4">
            <div
                class="glass-panel bg-card-light dark:bg-card-dark rounded-3xl shadow-2xl p-6 md:p-8 w-full max-w-2xl text-center">
                <div id="calculating-lottie" class="w-full max-w-[280px] md:max-w-[400px] mx-auto mb-4 md:mb-6">
                    <dotlottie-wc src="https://lottie.host/6a4eeccf-376f-41fc-bc0d-d8105813c4cc/8cCZ1hN1Y3.lottie"
                        autoplay loop style="width: 100%; height: auto;"></dotlottie-wc>
                </div>
                <h2 class="text-2xl md:text-3xl font-bold mb-2">Menganalisis Kognitif...</h2>
                <p class="text-sm md:text-base text-gray-500 dark:text-gray-400 mb-6 md:mb-8">AI sedang memproses pola
                    jawaban kamu pada 8 dimensi kecerdasan</p>

                <div
                    class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 md:h-6 mb-6 md:mb-8 relative overflow-hidden shadow-inner">
                    <div id="calculating-progress-bar"
                        class="bg-gradient-to-r from-primary to-accent h-full rounded-full transition-all duration-500 ease-out shadow-[0_0_15px_rgba(79,70,229,0.5)]"
                        style="width: 0%"></div>
                    <span id="calculating-progress-text"
                        class="absolute inset-0 flex items-center justify-center text-[10px] md:text-xs font-bold text-white drop-shadow-md">0%</span>
                </div>

                <div id="checklist-container"
                    class="grid grid-cols-2 md:grid-cols-5 gap-2 md:gap-3 text-xs md:text-sm font-medium text-gray-600 dark:text-gray-300">
                    <div
                        class="checklist-item flex flex-col items-center gap-1 md:gap-2 p-2 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-700">
                        <span
                            class="material-icons text-gray-300 text-lg md:text-xl transition-colors duration-300">check_circle</span>
                        <span>Memori</span>
                    </div>
                    <div
                        class="checklist-item flex flex-col items-center gap-1 md:gap-2 p-2 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-700">
                        <span
                            class="material-icons text-gray-300 text-lg md:text-xl transition-colors duration-300">check_circle</span>
                        <span>Kecepatan</span>
                    </div>
                    <div
                        class="checklist-item flex flex-col items-center gap-1 md:gap-2 p-2 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-700">
                        <span
                            class="material-icons text-gray-300 text-lg md:text-xl transition-colors duration-300">check_circle</span>
                        <span>Reaksi</span>
                    </div>
                    <div
                        class="checklist-item flex flex-col items-center gap-1 md:gap-2 p-2 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-700">
                        <span
                            class="material-icons text-gray-300 text-lg md:text-xl transition-colors duration-300">check_circle</span>
                        <span>Fokus</span>
                    </div>
                    <div
                        class="checklist-item flex flex-col items-center gap-1 md:gap-2 p-2 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-100 dark:border-gray-700">
                        <span
                            class="material-icons text-gray-300 text-lg md:text-xl transition-colors duration-300">check_circle</span>
                        <span>Logika</span>
                    </div>
                </div>
            </div>
        </div>

    </div>



    <div id="navigation-wrapper"
        class="hidden fixed bottom-0 left-0 right-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md border-t border-gray-200 dark:border-gray-800 py-1 z-40 safe-pb shadow-sm">
        <div class="max-w-7xl mx-auto px-4 flex items-center justify-between min-h-[36px]">

            <!-- Prev Button -->
            <button id="nav-prev-btn" onclick="prevQuestion()"
                class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-50 hover:bg-gray-100 text-gray-400 disabled:opacity-30 disabled:cursor-not-allowed transition-colors border border-gray-100 dark:border-gray-700 active:scale-95">
                <span class="material-symbols-rounded text-lg">chevron_left</span>
            </button>

            <!-- Pagination / Counter -->
            <div id="pagination-container"
                class="text-[10px] uppercase tracking-wider font-bold text-gray-500 font-mono bg-gray-50 dark:bg-gray-800 px-3 py-1 rounded-full border border-gray-100 dark:border-gray-700">
                1 of 25</div>

            <!-- Next Button -->
            <button id="nav-next-btn" onclick="nextQuestion()"
                class="w-8 h-8 flex items-center justify-center rounded-full bg-gray-50 hover:bg-gray-100 text-gray-600 hover:text-gray-900 transition-colors border border-gray-100 dark:border-gray-700 active:scale-95">
                <span class="material-symbols-rounded text-lg">chevron_right</span>
            </button>

            <!-- Finish Button (Hidden by default) -->
            <!-- Finish Button (Auto-triggered now) -->
            <!-- <button id="finish-btn"
                class="hidden px-4 py-1 bg-teal-600 text-white rounded-md font-bold hover:bg-teal-700 transition-colors text-[10px] shadow-sm uppercase tracking-wide">
                Finish
            </button> -->

        </div>
    </div>

    <!-- <button id="finish-btn"
        class="hidden bg-gradient-to-r from-secondary to-green-400 text-white font-bold py-1.5 px-4 md:py-2 md:px-6 rounded-full shadow-lg hover:shadow-green-500/30 hover:-translate-y-0.5 transition-all text-xs md:text-sm whitespace-nowrap flex-shrink-0">
        Selesai
    </button> -->
    </div>

    </div>



    <div id="result-modal" class="hidden fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-gray-900/80 backdrop-blur-md"></div>


        <div id="result-container"
            class="relative w-full max-w-md max-h-[90vh] overflow-y-auto bg-[#0B1121] text-white rounded-[2.5rem] shadow-2xl border border-slate-800 flex flex-col p-6 transform transition-all duration-500">


            <div class="absolute inset-0 opacity-20 pointer-events-none z-0"
                style="background-image: linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px); background-size: 40px 40px;">
            </div>


            <div
                class="absolute top-0 right-0 w-[200px] h-[200px] bg-blue-900/20 rounded-full blur-[80px] pointer-events-none z-0">
            </div>
            <div
                class="absolute bottom-0 left-0 w-[200px] h-[200px] bg-indigo-900/20 rounded-full blur-[80px] pointer-events-none z-0">
            </div>


            <div class="relative z-10 flex flex-col items-center">


                <!-- Result content removed. Redirecting to dashboardIQ.html immediately after calculation. -->

            </div>
        </div>
    </div>


    <div id="share-card-container" class="fixed top-0 left-0 w-[600px] h-[600px] pointer-events-none z-[-1]"
        style="transform: translateX(-200%);">
        <div id="share-card"
            class="relative w-full h-full overflow-hidden bg-[#0B1121] text-white flex flex-col p-10 justify-between font-sans">

            <div class="absolute inset-0 opacity-20 pointer-events-none z-0"
                style="background-image: linear-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.1) 1px, transparent 1px); background-size: 40px 40px;">
            </div>

            <div
                class="absolute top-0 right-0 w-[400px] h-[400px] bg-blue-900/20 rounded-full blur-[100px] pointer-events-none z-0">
            </div>
            <div
                class="absolute bottom-0 left-0 w-[300px] h-[300px] bg-indigo-900/20 rounded-full blur-[80px] pointer-events-none z-0">
            </div>


            <div class="relative z-10 w-full h-full flex flex-col justify-between">

                <div class="flex justify-between items-start w-full shrink-0">
                    <div class="flex flex-col">
                        <h2 class="text-2xl font-bold tracking-tight text-white leading-none">MindTest.id</h2>
                        <span class="text-[10px] text-slate-500 uppercase tracking-[0.2em] mt-1">Cognitive
                            Assessment</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="h-px w-8 bg-blue-500"></div>
                        <span class="text-blue-400 font-mono text-[10px] tracking-[0.2em] uppercase">OFFICIAL
                            RESULT</span>
                    </div>
                </div>


                <div class="flex-1 flex flex-col items-center justify-center w-full relative -mt-4">

                    <div class="relative mb-4">
                        <div
                            class="absolute inset-[-6px] rounded-full border border-blue-500/30 border-dashed animate-[spin_20s_linear_infinite]">
                        </div>
                        <div class="absolute inset-[-2px] rounded-full border border-slate-700 bg-[#0B1121]"></div>
                        <div
                            class="w-20 h-20 rounded-full overflow-hidden relative z-10 border-2 border-slate-600 bg-[#0B1121]">
                            <img id="share-card-img-real" src=""
                                class="w-full h-full object-cover grayscale contrast-125 hidden"
                                crossorigin="anonymous">
                            <div id="share-card-svg-container" class="w-full h-full p-1"></div>
                        </div>
                        <div
                            class="absolute -right-4 top-1/2 w-1.5 h-1.5 bg-blue-500 rounded-full shadow-[0_0_10px_rgba(59,130,246,0.8)]">
                        </div>
                        <div class="absolute -left-4 top-1/2 w-1.5 h-1.5 bg-slate-700 rounded-full"></div>
                    </div>

                    <div class="text-center mb-1">
                        <h3 id="share-card-archetype"
                            class="text-xl font-bold font-display tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-400 uppercase">
                            Visionary Thinker</h3>
                    </div>

                    <div class="relative flex flex-col items-center justify-center">
                        <h1 id="share-card-score"
                            class="text-[7.5rem] font-bold text-white leading-none tracking-tighter drop-shadow-2xl">
                            125
                        </h1>
                        <span
                            class="text-[10px] font-mono text-slate-500 uppercase tracking-[0.4em] mt-2 border-t border-slate-800 pt-2 w-full text-center">Fluid
                            Intelligence (Gf)</span>
                    </div>


                    <div class="w-full px-12 h-12 relative flex items-end justify-center mt-6 opacity-80">
                        <svg class="w-full h-full overflow-visible" viewBox="0 0 200 60" preserveAspectRatio="none">
                            <defs>
                                <linearGradient id="darkChartGradient" x1="0" x2="0" y1="0" y2="1">
                                    <stop offset="0%" stop-color="#3b82f6" stop-opacity="0.3" />
                                    <stop offset="100%" stop-color="#3b82f6" stop-opacity="0" />
                                </linearGradient>
                            </defs>
                            <path d="M0,60 Q100,-20 200,60 Z" fill="url(#darkChartGradient)" />
                            <path d="M0,60 Q100,-20 200,60" fill="none" stroke="#475569" stroke-width="1.5" />
                            <line x1="100" y1="10" x2="100" y2="60" stroke="#334155" stroke-width="1"
                                stroke-dasharray="2 2" />
                        </svg>
                        <div id="bell-curve-marker" class="absolute bottom-0 h-[120%] flex flex-col items-center"
                            style="left: 80%; transform: translateX(-50%);">
                            <div class="w-0.5 h-full bg-blue-500 shadow-[0_0_10px_rgba(59,130,246,0.5)]"></div>
                            <div
                                class="w-2 h-2 bg-blue-400 rounded-full shadow-[0_0_10px_rgba(59,130,246,1)] absolute bottom-0">
                            </div>
                        </div>
                    </div>
                </div>


                <div class="w-full shrink-0 mt-2">
                    <div class="grid grid-cols-2 gap-4 pt-5 border-t border-slate-800/60 mb-5">
                        <div class="group/stat">
                            <div class="flex items-end gap-1 mb-1">
                                <span id="share-card-class"
                                    class="text-xl font-bold text-white group-hover/stat:text-blue-400 transition-colors">Superior</span>
                                <span class="text-[10px] text-blue-500/60 mb-1 material-icons text-sm">psychology</span>
                            </div>
                            <div class="text-[9px] text-slate-500 uppercase tracking-wider font-semibold font-mono">
                                Klasifikasi Mental</div>
                        </div>
                        <div class="group/stat text-right">
                            <div class="flex items-end gap-1 mb-1 justify-end">
                                <span id="share-card-percentile"
                                    class="text-xl font-bold text-white group-hover/stat:text-blue-400 transition-colors">Top
                                    5%</span>
                                <span class="text-[10px] text-emerald-500/80 mb-1 material-icons text-sm">public</span>
                            </div>
                            <div class="text-[9px] text-slate-500 uppercase tracking-wider font-semibold font-mono">
                                Populasi Global</div>
                        </div>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="flex flex-col font-mono text-[9px] text-slate-600">
                            <span>VERIFIED ID: <span id="verify-id" class="text-slate-400">MT-8842-X</span></span>
                            <span>DATE: <span id="verify-date" class="text-slate-400">27.11.2025</span></span>
                        </div>
                        <div class="bg-white/10 border border-white/10 rounded-lg p-2 flex items-center gap-3">
                            <div class="text-right hidden sm:block">
                                <div class="text-[9px] text-slate-400 uppercase tracking-wide">Take Test</div>
                                <div class="text-[10px] font-bold text-white">mindtest.id</div>
                            </div>
                            <div class="w-8 h-8 bg-white rounded flex items-center justify-center">
                                <img id="share-card-qr"
                                    src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https://mindtest.id"
                                    class="w-full h-full object-contain mix-blend-multiply" crossorigin="anonymous">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="profile-modal" class="hidden fixed inset-0 z-[70] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
        <div
            class="relative bg-white dark:bg-gray-800 rounded-3xl w-full max-w-md p-8 shadow-2xl border border-white/10">
            <button id="close-modal-btn"
                class="absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors"><span
                    class="material-icons">close</span></button>
            <div class="text-center mb-8">
                <div
                    class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4 text-primary">
                    <span class="material-icons">person_add</span>
                </div>
                <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Setup Profil</h2>
                <p class="text-sm text-gray-500">Personalisasi pengalaman tes Anda.</p>
            </div>
            <div id="profile-steps" class="relative min-h-[250px]">
                <div id="step-1" class="transition-all duration-300 absolute inset-0">
                    <h3 class="font-semibold text-center mb-4 text-gray-700 dark:text-gray-300">Pilih Avatar</h3>
                    <div class="avatar-scroll-container overflow-x-auto hide-scrollbar -mx-4 pb-4 px-4">
                        <div id="avatar-options" class="flex items-center gap-4 py-2"></div>
                    </div><button id="next-step-1"
                        class="mt-6 w-full bg-primary text-white font-bold py-3.5 rounded-xl hover:bg-primary-hover shadow-lg shadow-primary/30 transition-all">Lanjut</button>
                </div>
                <div id="step-2" class="hidden transition-all duration-300 opacity-0 absolute inset-0">
                    <h3 class="font-semibold text-center mb-4 text-gray-700 dark:text-gray-300">Asal Negara</h3>
                    <div id="country-options" class="grid grid-cols-2 gap-3"><button data-country="id"
                            class="country-select flex items-center justify-center gap-2 border border-gray-200 dark:border-gray-600 px-4 py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all"><span
                                class="fi fi-id rounded-sm shadow-sm"></span><span>Indonesia</span></button><button
                            data-country="us"
                            class="country-select flex items-center justify-center gap-2 border border-gray-200 dark:border-gray-600 px-4 py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all"><span
                                class="fi fi-us rounded-sm shadow-sm"></span><span>USA</span></button><button
                            data-country="my"
                            class="country-select flex items-center justify-center gap-2 border border-gray-200 dark:border-gray-600 px-4 py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all"><span
                                class="fi fi-my rounded-sm shadow-sm"></span><span>Malaysia</span></button><button
                            data-country="sg"
                            class="country-select flex items-center justify-center gap-2 border border-gray-200 dark:border-gray-600 px-4 py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all"><span
                                class="fi fi-sg rounded-sm shadow-sm"></span><span>Singapura</span></button><button
                            data-country="th"
                            class="country-select flex items-center justify-center gap-2 border border-gray-200 dark:border-gray-600 px-4 py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all"><span
                                class="fi fi-th rounded-sm shadow-sm"></span><span>Thailand</span></button><button
                            data-country="ph"
                            class="country-select flex items-center justify-center gap-2 border border-gray-200 dark:border-gray-600 px-4 py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all"><span
                                class="fi fi-ph rounded-sm shadow-sm"></span><span>Filipina</span></button></div>
                    <button id="next-step-2"
                        class="mt-6 w-full bg-primary text-white font-bold py-3.5 rounded-xl hover:bg-primary-hover shadow-lg shadow-primary/30 transition-all">Lanjut</button>
                </div>
                <div id="step-3" class="hidden transition-all duration-300 opacity-0 absolute inset-0">
                    <h3 class="font-semibold text-center mb-4 text-gray-700 dark:text-gray-300">Nama Panggilan</h3>
                    <div class="relative"><span
                            class="absolute left-4 top-3.5 text-gray-400 material-icons text-lg">badge</span><input
                            id="username-input" type="text"
                            class="w-full pl-11 pr-4 py-3.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all font-medium"
                            placeholder="Contoh: Einstein_Junior"></div><button id="start-test-btn-modal"
                        class="mt-6 w-full bg-gradient-to-r from-primary to-accent text-white font-bold py-3.5 rounded-xl hover:shadow-lg hover:shadow-primary/40 hover:-translate-y-0.5 transition-all">Mulai
                        Tes IQ</button>
                </div>
            </div>
            <p id="modal-error" class="text-rose-500 text-sm font-medium text-center mt-4 min-h-[1.25rem]"></p>
        </div>
    </div>

    <div id="alert-modal"
        class="hidden fixed inset-0 z-[80] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-xl max-w-sm w-full text-center">
            <div
                class="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4 text-amber-500">
                <span class="material-icons">priority_high</span>
            </div>
            <p id="alert-message" class="mb-6 font-medium text-gray-700 dark:text-gray-300">Pesan alert.</p><button
                id="alert-ok-btn"
                class="bg-primary text-white font-bold py-2.5 px-6 rounded-xl w-full">Mengerti</button>
        </div>
    </div>

    <!-- FINISH CONFIRMATION MODAL -->
    <div id="finishConfirmModal"
        class="hidden fixed inset-0 z-[90] flex items-center justify-center p-4 bg-gray-900/80 backdrop-blur-sm transition-opacity duration-300">
        <div
            class="bg-white dark:bg-gray-800 rounded-[2.5rem] shadow-2xl max-w-[340px] w-full p-8 text-center animate-bounce-in relative overflow-hidden">
            <!-- Decorative blur -->
            <div
                class="absolute top-0 left-1/2 -translate-x-1/2 w-40 h-40 bg-emerald-500/10 rounded-full blur-3xl pointer-events-none">
            </div>

            <div
                class="relative w-40 h-40 bg-emerald-50 dark:bg-emerald-900/20 rounded-full flex items-center justify-center mx-auto mb-6 overflow-visible">
                <dotlottie-wc src="https://lottie.host/5b62356b-2964-44e4-90fd-36de3943cbae/XlDija8av9.lottie" autoplay
                    loop style="width: 120%; height: auto;"></dotlottie-wc>
            </div>

            <h2 class="text-2xl font-bold mb-3 text-gray-900 dark:text-white tracking-tight">Tes Selesai!</h2>

            <p class="text-gray-500 dark:text-gray-400 mb-8 text-sm leading-relaxed px-2">
                Kamu telah menjawab semua pertanyaan.<br>Siap melihat hasilnya?
            </p>

            <button id="seeResultNowBtn"
                class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3.5 px-6 rounded-2xl shadow-lg shadow-emerald-500/30 transition-all transform hover:-translate-y-0.5 active:scale-95 flex items-center justify-center gap-2">
                <span class="material-icons">visibility</span>
                Lihat Hasil Sekarang
            </button>

            <button onclick="document.getElementById('finishConfirmModal').classList.add('hidden')"
                class="mt-5 text-xs text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 font-medium tracking-wide transition-colors">
                Kembali ke Soal
            </button>
        </div>
    </div>

    <!-- LOGIN MODAL -->
    <app-auth-modal></app-auth-modal>
    <script src="layout.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-init.js"></script>
    <script type="module" src="quizz.js"></script>
</body>

</html>

